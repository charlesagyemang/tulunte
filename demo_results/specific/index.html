<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>TYMEXPERT</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- App favicon -->
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">

        <!--Chartist Chart CSS -->
        <link rel="stylesheet" href="../../assets/plugins/chartist/dist/chartist.min.css">

        <!-- App css -->
        <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="../../assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="../../assets/css/style.css" rel="stylesheet" type="text/css" />

        <script src="../../assets/js/modernizr.min.js"></script>
        <script src="https://www.w3schools.com/lib/w3.js"></script>

    </head>

    <body>



        <!-- Navigation Bar-->
        <header id="topnav">
            <div class="topbar-main">
                <div class="container-fluid">

                      <!-- Logo container-->
                      <div class="logo">
                          <!-- Text Logo -->
                          <a href="/" class="logo">
                              <span class="logo-small"><i class="mdi mdi-radar"></i></span>
                              <span class="logo-large"><i class="mdi mdi-radar"></i> Tymexpert</span>
                          </a>
                          <!-- Image Logo -->
                          <!-- <a href="/" class="logo">
                              <img src="assets/images/logo-sm.png" alt="" height="26" class="logo-small">
                              <img src="assets/images/logo.png" alt="" height="24" class="logo-large">
                          </a> -->

                      </div>
                      <!-- End Logo container-->







        </header>
        <!-- End Navigation Bar-->

        <div class="wrapper">
            <div class="container-fluid">


               <center>
                 <h1>Like What You See? </h1>
                 <button class="btn btn-success btn-lg" type="button" name="button"><a href="/signup">Signup For More</a></button>
                 <h1>Analytics Report : Your Life At A Glance </h1>
               </center>
               <br>
                <div class="row">


                  <div class="col-xl-6">
                      <div class="card-box">


                            <div id="life-lived"></div>
                            <div id="distributed-series-2" class="ct-chart ct-golden-section"></div>

                        </div>



                  </div><!-- end col-->

                  <div class="col-xl-6">
                      <div  class="card-box">

                            <h4 id="leftiii" class="header-title m-t-0 m-b-30">Progressbars</h4>

                          <div id="id01">

                          </div>

                        </div>

                  </div><!-- end col-->


                    <div class="col-xl-6">
                        <div class="card-box">

                            <h4 class="header-title m-t-0 m-b-30">Life Left Pie Chart</h4>

                            <div id="pie-chart" class="ct-chart ct-golden-section"></div>
                        </div>
                    </div><!-- end col-->


                     <div class="col-xl-6">
                        <div class="card-box">
                              <h4 class="header-title m-t-0 m-b-30">Life Left Doughnut Chart</h4>

                              <div id="animating-donut" class="ct-chart ct-golden-section"></div>
                         </div>
                    </div>

                    <div class="col-xl-6">
                        <div class="card-box">

                            <h4 class="header-title m-t-0 m-b-30">Life Left Activities Histogram</h4>

                            <div id="distributed-series" class="ct-chart ct-golden-section"></div>
                        </div>
                    </div><!-- end col-->

                    <div class="col-xl-6">
                        <div class="card-box">

                            <h4 class="header-title m-t-0 m-b-30">Overall Life Snapshot Histogram</h4>

                            <div id="distributed-series-3" class="ct-chart ct-golden-section"></div>
                        </div>
                    </div><!-- end col-->

                </div>
                <!-- end row -->


            </div> <!-- end container -->



            <!-- /Right-bar -->

        </div>
        <!-- end wrapper -->




        <!-- jQuery  -->
        <script src="../../assets/js/jquery.min.js"></script>
        <script src="../../assets/js/popper.min.js"></script>
        <script src="../../assets/js/bootstrap.min.js"></script>
        <script src="../../assets/js/waves.js"></script>
        <script src="../../assets/js/jquery.slimscroll.js"></script>

        <!--Chartist Chart-->
        <script src="../../assets/plugins/chartist/dist/chartist.min.js"></script>
        <script src="../../assets/plugins/chartist/dist/chartist-plugin-tooltip.min.js"></script>
        <script src="../../assets/pages/jquery.chartist.init.js"></script>

        <!-- App js -->
        <script src="../../assets/js/jquery.core.js"></script>
        <script src="../../assets/js/jquery.app.js"></script>


        <script type="text/javascript">

            function test_years_months (n) {

              let result = (n - Math.floor(n)) !== 0;

              if (n < 1) {


                if (result) {

                  n  = n.toString().split(".");

                  let decimalVal = n[n.length-1].split("")[0];

                  let finalText =  decimalVal + " month(s)"

                  return finalText;
                }

              } else {

                if (result) {
                  n  = n.toString().split(".");

                  let decimalVal = n[n.length-1].split("")[0];

                  let finalText = n[0] + " year(s) " + decimalVal + " month(s)" ;

                  return finalText

                } else {

                  return n + " years";
                }


              }


            }

          $(document).ready(function(){
            console.log("hehhe");

           let keys = JSON.parse(localStorage.keys)
           let values = JSON.parse(localStorage.values)
           let leftOfAll = JSON.parse(localStorage.leftOfAll)
           let years = JSON.parse(localStorage.years)
           let age     = localStorage.age;


            console.log(keys);



            //Pie chart with custom labels



            var data = {
              labels: keys,
              series: years
            };

            var options = {
              labelInterpolationFnc: function(value) {
                return value[0]
              }
            };

            var responsiveOptions = [
              ['screen and (min-width: 640px)', {
                chartPadding: 30,
                labelOffset: 100,
                labelDirection: 'explode',
                labelInterpolationFnc: function(value) {
                  return value;
                }
              }],
              ['screen and (min-width: 1024px)', {
                labelOffset: 80,
                chartPadding: 20
              }]
            ];

            new Chartist.Pie('#pie-chart', data, options, responsiveOptions);



            //Animating a Donut with Svg.animate

            var chart = new Chartist.Pie('#animating-donut', {
              series: years,
              labels: keys
            }, {
              donut: true,
              showLabel: true,
              plugins: [
                Chartist.plugins.tooltip()
              ]
            });

            chart.on('draw', function(data) {
              if(data.type === 'slice') {
                // Get the total path length in order to use for dash array animation
                var pathLength = data.element._node.getTotalLength();

                // Set a dasharray that matches the path length as prerequisite to animate dashoffset
                data.element.attr({
                  'stroke-dasharray': pathLength + 'px ' + pathLength + 'px'
                });


              }
            });





              //Distributed series
              //
              new Chartist.Bar('#distributed-series', {
                labels: keys,
                series: years
              }, {
                distributeSeries: true,
                plugins: [
                  Chartist.plugins.tooltip()
                ]
              });




              let finale = []


                // form data

                for (var i = 0; i < keys.length; i++) {
                  let objectuse = `  <p w3-repeat = "data" class="font-600 m-b-5">You will ${keys[i]} for ${test_years_months(years[i])} <span class="text-primary pull-right"> Representing ${ Math.round((years[i] / leftOfAll) * 100)}% Of ${leftOfAll} Years</span></p>
                    <div class="progress">
                              <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: ${Math.round((years[i] / leftOfAll) * 100)}%;">
                                  <span class="sr-only">60% Complete</span>
                              </div>
                          </div>`


                  finale.push(objectuse);

                }



                 $("#leftiii").html(`Out Of The Ideal ${leftOfAll} you have left `)
                  $("#id01").html(finale)



                  finale2 = []
                  let keys2 = ["Years Lived", "Years Chosen"]
                  let values2 = [age, leftOfAll]
                  for (var i = 0; i < keys2.length; i++) {
                    let objectuse = `  <p w3-repeat = "data" class="font-600 m-b-5">${keys2[i]} = ${values2[i]} years  <span class="text-primary pull-right">Represents  ${ Math.round((values2[i] / 70) * 100)}% of Human Life Expectancy</span></p>
                      <div class="progress">
                                <div class="progress-bar progress-bar-secondary" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: ${Math.round((values2[i] / 70) * 100)}%;">
                                    <span class="sr-only">60% Complete</span>
                                </div>
                            </div>`


                    finale2.push(objectuse);

                  }


                  $("#life-lived").html(finale2)

                  //Distributed series 2
                  //
                  new Chartist.Bar('#distributed-series-2', {
                    labels: keys2,
                    series: values2
                  }, {
                    distributeSeries: true,
                    plugins: [
                      Chartist.plugins.tooltip()
                    ]
                  });


                  //Distributed series 2
                  //
                  new Chartist.Bar('#distributed-series-3', {
                    labels: keys2,
                    series: values2
                  }, {
                    distributeSeries: true,
                    plugins: [
                      Chartist.plugins.tooltip()
                    ]
                  });

          })

        </script>

    </body>
</html>
