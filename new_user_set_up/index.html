<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Timexpert</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico">

    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="../assets/plugins/morris/morris.css">

    <!-- Plugins css-->
    <link href="../assets/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet" />
    <link href="../assets/plugins/multiselect/css/multi-select.css" rel="stylesheet" type="text/css" />
    <link href="../assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
    <link href="../assets/plugins/switchery/switchery.min.css" rel="stylesheet" />
    <link href="../assets/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
    <link href="../assets/plugins/mjolnic-bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="../assets/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="../assets/plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">

    <!-- Sweet Alert css -->
      <link href="../assets/plugins/sweet-alert/sweetalert2.min.css" rel="stylesheet" type="text/css" />

    <!-- App css -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/icons.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/style.css" rel="stylesheet" type="text/css" />

    <script src="../assets/js/modernizr.min.js"></script>

</head>

<!-- Navigation Bar-->
<header id="topnav">
    <div class="topbar-main">
        <div class="container-fluid">

            <!-- Logo container-->
            <div class="logo">
                <!-- Text Logo -->
                <a href="/" class="logo">
                    <span class="logo-small"><i class="mdi mdi-radar"></i></span>
                    <span class="logo-large"><i class="mdi mdi-radar"></i> Timexpert</span>
                </a>
                <!-- Image Logo -->
                <!-- <a href="/" class="logo">
                    <img src="assets/images/logo-sm.png" alt="" height="26" class="logo-small">
                    <img src="assets/images/logo.png" alt="" height="24" class="logo-large">
                </a> -->

            </div>
            <!-- End Logo container-->


            <div class="menu-extras topbar-custom">

                <ul class="list-unstyled topbar-right-menu float-right mb-0">

                    <li class="menu-item">
                        <!-- Mobile menu toggle-->
                        <a class="navbar-toggle nav-link">
                            <div class="lines">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </a>
                        <!-- End mobile menu toggle-->
                    </li>


                </ul>
            </div>
            <!-- end menu-extras -->

            <div class="clearfix"></div>

        </div> <!-- end container -->
    </div>
    <!-- end topbar-main -->
</header>
<!-- End Navigation Bar-->
<body>


        <div class="content-page">


              <button id="open-mod" type="button" class="btn btn-primary btn-lg btn-rounded" data-toggle="modal" data-target="#exampleModal">

              </button>

            <!-- Start content -->
            <div class="content">
                <div class="container-fluid">

                      <br><br>  <br><br>  <br><br>

                      <!-- PROGRESSBAR WIZARD -->
                    <div class="col-xl-12">
                        <div class="card-box pb-0">
                          <h1 id="walk-html"></h1>
                            <h3 >Please provide answers for all the sections below and click complete. Thank you.</h3>

                            <div id="progressbarwizard" class="pull-in">
                                <ul class="nav nav-tabs nav-justified">
                                    <li class="nav-item"><a href="#account-2" data-toggle="tab" class="nav-link">Personal Information</a></li>
                                    <li id="prof-2" class="nav-item"><a href="#profile-tab-2" data-toggle="tab" class="nav-link">Daily Activities</a></li>

                                </ul>

                                <div class="tab-content b-0 mb-0">
                                    <div class="tab-pane p-t-10 fade" id="account-2">
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="form-group row clearfix">
                                                    <label class="col-md-3 control-label " for="userName1">How Old Are You? </label>
                                                    <div class="col-md-6">
                                                        <input class="form-control required" placeholder="Please Enter Correct Age" id="userAge" name="userName" type="number">
                                                    </div>
                                                </div>

                                                <div class="form-group row clearfix">
                                                  <label class="col-md-3 control-label " for="confirm1">Student Or Worker? </label>
                                                  <div class="col-md-6">
                                                    <div class="radio radio-info form-check-inline">
                                                        <input type="radio" id="inlineRadio1" value="student" name="radioInline" >
                                                        <label for="inlineRadio1">Student </label>
                                                    </div>
                                                    <div class="radio radio-info form-check-inline">
                                                        <input  type="radio" id="inlineRadio2" value="worker" name="radioInline" checked>
                                                        <label for="inlineRadio1"> Worker </label>
                                                    </div>
                                                    <div class="radio form-check-inline">
                                                        <input  type="radio" id="inlineRadio3" value="both" name="radioInline" >
                                                        <label for="inlineRadio1"> Both </label>
                                                    </div>
                                                  </div>
                                               </div>

                                                <div class="form-group row clearfix">
                                                    <label class="col-md-3 control-label " for="confirm1">Working Phone Number</label>
                                                    <div class="col-md-6">
                                                        <input id="userWorkinNumber1" placeholder="Please Enter  A Working Phone Number Eg: 0277 88 99 00" name="confirm" type="text" class="required form-control">
                                                    </div>
                                                </div>
                                                <br>
                                                <button  id="next-page" type="button"  class="btn btn-primary"name="button">Next</button>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane p-t-10 fade" id="profile-tab-2">
                                      <div class="row">

                                          <div class="col-lg-12">

                                              <div class="card-box">
                                                  <h3 >What Are Some Of The Major Things You Do On A Daily Basis Or Even Weekends Only</h3>
                                                  <p>Enter values in the box and separate with a comma "," when you are done click next. Example: Work, Sleep, Board Car To & From Work, Do House Chores etc</p>
                                                  <div class="tags-default">
                                                      <input id="activity-void" type="text"
                                                          value="Work, Sleep, Board Car To & From Work, Do House Chores, Go To School, Visiting Family" data-role="tagsinput"
                                                          placeholder="add activities" />
                                                  </div>
                                                  <br>
                                                  <button  id="next-button" type="button"  class="btn btn-success btn-lg"name="button">Complete</button>

                                                  </div>
                                          </div><!-- end col -->
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>


                    </div>
        <!-- /Right-bar -->
          </div>


        </div>
    <!-- END wrapper -->

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="exampleModalLabel">Fill In The Details Correctly</h2>
                    <button id="close-modall" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="modal-body-mutate" class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button id="look-into-my-future" type="button" class="btn btn-primary">Finish</button>
                </div>
            </div>
        </div>
    </div>


    <!-- jQuery  -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/popper.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>

    <script src="../assets/js/jquery.slimscroll.js"></script>
    <script src="../assets/js/jquery.scrollTo.min.js"></script>


    <script src="../assets/plugins/sweet-alert/sweetalert2.min.js"></script>
    <script src="../assets/pages/jquery.sweet-alert.init.js"></script>


    <!-- Plugins Js -->
    <script src="../assets/plugins/switchery/switchery.min.js"></script>
    <script src="../assets/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/multiselect/js/jquery.multi-select.js"></script>
    <script type="text/javascript" src="../assets/plugins/jquery-quicksearch/jquery.quicksearch.js"></script>
    <script src="../assets/plugins/select2/js/select2.min.js" type="text/javascript"></script>
    <script src="../assets/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js" type="text/javascript"></script>
    <script src="../assets/plugins/bootstrap-inputmask/bootstrap-inputmask.min.js" type="text/javascript"></script>
    <script src="../assets/plugins/moment/moment.js"></script>
    <script src="../assets/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script src="../assets/plugins/mjolnic-bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
    <script src="../assets/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="../assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="../assets/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js" type="text/javascript"></script>
    <!-- Form wizard -->
    <script src="assets/plugins/bootstrap-wizard/jquery.bootstrap.wizard.js"></script>
    <script src="assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- App js -->
    <script src="../assets/js/jquery.core.js"></script>
    <script src="../assets/js/jquery.app.js"></script>

    <script>
        $("#open-mod").hide()
        $("#account-2").addClass("nav-link active show");
        $("#walk-html").html(`<h2>Hi ${JSON.parse(localStorage.user_details).name} Lets Get You Started</h2>`)


        function checkSection1() {
          // get values

          let userWorkingNumber       = $("#userWorkinNumber1").val();
          let userAge                 = $("#userAge").val();
          let userStudentWorkerStatus = $("input[name='radioInline']:checked").val()


          //  check for emptiness

          if (userWorkingNumber.length > 9 && userAge > 0) {
            // console.log(userWorkingNumber, userAge);

            // form body
            localStorage.section1SetUp = JSON.stringify({
              user_number: userWorkingNumber ,
              user_age: userAge ,
              user_student_status: userStudentWorkerStatus
            })

            // disable and enable stuff
            $("#profile-tab-2").addClass("nav-link active show");
            $("#account-2").removeClass("nav-link active show");

            return true

          } else {
            console.log("Somnething is missen");
            swal({
               title: "Missen Values",
               text: "Please Enter Age And A 10 Digit Working Phone Number",
               type: "info",
             });

             return false

          }
        }

        $(document).ready(function () {

          $("#prof-2").click(function (e) {
            e.preventDefault();
            console.log("maba");
            checkSection1();
          })


          $("#next-page").click(function(){
            checkSection1();
          })

          $("#next-button").click(function(){

            $this = $(this);

            //------ Section 1 -----//

            // chech section one

            if (checkSection1()) {

              // section 2 Data ------- Logic

              // get data from input
              let dataGottenFromUser  = $("#activity-void").val();
              let datalen             = dataGottenFromUser.split(",").length;
              let section1Data        = JSON.parse(localStorage.section1SetUp);
              // console.log(datalen);

              let finalArr  = [];


              //make sure its not empty
               // console.log(dataGottenFromUser.length);

               if (dataGottenFromUser.length > 0) {
                 // loop through data and create a new element from it
                 dataGottenFromUser.split(",").forEach(function(item, index){
                   let inputElement = `<div class="form-group">
                       <label for="">How Many Hours Do You ${item} For</label>
                       <input id="id-for-position-${index+1}"  key="${item}" type="number" class="form-control">
                   </div>
                  `

                  //push to array
                  finalArr.push(inputElement);


                 })


                 // form final element
                 let finsihedProduct  = `<form>
                 ${finalArr.join("<br />\n")}
                 </form>`

                 console.log(finsihedProduct);



                 // fill with modal

                 // $("#open-mod").click();
                 // $("#modal-body-mutate").html(finsihedProduct);

                 localStorage.lenArr = datalen;

                 let finalBodyFormed = {
                   user_number: section1Data.user_number ,
                   user_age: section1Data.user_age ,
                   user_student_status: section1Data.user_student_status,
                   user_activities_len: datalen,
                   user_modal_body: finsihedProduct,
                   user_raw_input_data: dataGottenFromUser,
                 }



                console.log(finalBodyFormed);
                 // make a call to devless

                 $this.text("Submitting...")

                 const myConfig = { headers: {
                   Authorization: "Bearer " + localStorage.loginTokenGotten
                 } }

                 axios.put(`http://localhost:3000/api/users/${localStorage.loginIdGotten}`, {
                   phoneNumber: section1Data.user_number,
                   age: section1Data.user_age,
                   status: section1Data.user_student_status,
                   userActivitiesLen: datalen,
                   userModalBody: finsihedProduct,
                   userRawSetUpData: dataGottenFromUser
                 }, myConfig)
                 .then(function (response) {
                   console.log(response);
                   $this.text("Success.. Redirecting...")
                   window.location.href = "/new_dashboard";
                 })
                 .catch(function (error) {
                   console.log(error);
                   alert(error);
                 });

               } else {

                 swal({
                    title: "No Value Entered",
                    text: "Please Enter At Least One Value",
                    type: "info",
                  });
               }

               // section 2 Ending-------

            } else {

              $("#profile-tab-2").removeClass("nav-link active show");
              $("#account-2").addClass("nav-link active show");

            }
          })


          // logic for Dynamic modal
          $("#look-into-my-future").unbind("click").click(function(){
              let $this = $(this);
              console.log($this.text());

              // display something
              let tupple = [];


              //grab the values -- use lenght of use setup data to run the loop
              for (a=1; a < parseInt(localStorage.lenArr) + 1 ; a++){


                let eachValue = $(`#id-for-position-${a}`).val();
                let eachKey   = $(`#id-for-position-${a}`).attr("key");


                // do an empty check
                if (eachValue.length > 0) {
                  // console.log(eachKey, eachValue);
                  // console.log(`id-for-position-${a}`);
                  tupple.push([eachKey,eachValue]);
                }

              }

              // tupple lenght
              let tuplen = tupple.length
              let verifStatus = tuplen == parseInt(localStorage.lenArr);
              // console.log(tuplen);
              // console.log(verifStatus);


              // if check some stuff make empty
              if (verifStatus) {

                console.log(tupple);

                // Whole logic goes here


              } else {
                  let numberEmpty = parseInt(localStorage.lenArr) - tuplen
                  // make sure not the boxes are empty
                  swal({
                     title: `No Value Entered For ${numberEmpty} items`,
                     text:  `Please enter a valid number below 24 in the ${numberEmpty} boxes`,
                     type:  "warning",
                   });
              }

          })



        });


    </script>

</body>

</html>
